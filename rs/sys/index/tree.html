<html>
<head>
    <meta charset="UTF-8">
    <title>form</title>
</head>
<body>
<script>
    require(['!this.js'], $$.load)
</script>
</body>
</html>
<script data-name="this.htm" type="text/html">
    <div>
        <div class="head_box">
            <div class="inner wrp">
                <h1 class="logo"><a href="/" title="微信公众平台"></a></h1>
                <div class="main-nav">
                    <el-menu :default-active="activeIndex2" class="el-menu-demo" mode="horizontal">
                        <el-menu-item index="1">首页</el-menu-item>
                        <el-menu-item index="3">社区</el-menu-item>
                        <el-menu-item index="2"><a href="#">系统</a></el-menu-item>
                    </el-menu>
                </div>
                <div class="account">
                    <div class="account_meta account_info account_meta_primary">
                        <div class="nickname">
                            <a>李靖</a>
                            <div id="accountArea" class="account_meta account_inbox account_meta_primary">
                                <a href="" class="account_inbox_switch">2条未读</a>
                            </div>
                            <div class="account_meta account_logout account_meta_primary">
                                <a id="logout" href="">退出</a>
                            </div>
                        </div>
                        <span class="type_wrp">超级管理员</span>
                        <a>
                            <img src="https://avatars2.githubusercontent.com/u/16190010?v=3&s=460" class="avatar">
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="body">
            <div class="cell_layout">
                <div class="col_side">
                    <el-menu mode="vertical" :default-active="menu" class="el-menu-vertical-demo">
                        <el-menu-item-group v-for="list in data" @click.native="item" :title="list.title">
                            <el-menu-item :index="value.id" v-for="(value,index) in list.child" @click="go(value.uri)">
                                {{value.title}}
                            </el-menu-item>
                        </el-menu-item-group>
                    </el-menu>
                </div>
                <div class="col_main">
                    <div class="main_hd"><h2>树形</h2></div>
                    <div class="main_bd">
                        <div class="float_layout">
                            <el-row :gutter="20">
                                <el-col :span="16">
                                    <div class="panel-content">
                                        <div class="panel-title">
                                            <div class="panel-title_hd">修改详细信息</div>
                                            <div style="text-align: right; ">
                                                <el-button type="text"><i class="el-icon-plus"></i>新增</el-button>
                                                <el-button type="text"><i class="el-icon-delete"></i>删除</el-button>
                                            </div>
                                        </div>
                                        <el-col :span="20" v-loading.body.lock="loading">
                                            <el-form :model="ruleForm" ref="ruleForm" label-width="100px"
                                                     class="demo-ruleForm">
                                                <el-form-item label="名称" prop="name">
                                                    <el-input v-model="ruleForm.name"></el-input>
                                                </el-form-item>
                                                <el-form-item label="是否隐藏" prop="delivery">
                                                    <el-switch on-text="" off-text=""
                                                               v-model="ruleForm.delivery"></el-switch>
                                                </el-form-item>
                                                <el-form-item label="链接" prop="name">
                                                    <el-input v-model="ruleForm.uri"></el-input>
                                                </el-form-item>
                                                <el-form-item label="描述" prop="desc">
                                                    <el-input type="textarea" v-model="ruleForm.desc"></el-input>
                                                </el-form-item>
                                                <el-form-item>
                                                    <el-button type="primary" @click="submitForm('ruleForm')">保存
                                                    </el-button>
                                                    <el-button @click="resetForm('ruleForm')">重置</el-button>
                                                </el-form-item>
                                            </el-form>
                                        </el-col>
                                    </div>
                                </el-col>
                                <el-col :span="8">
                                    <el-tree :data="data2" :props="defaultProps" @node-click="handleNodeClick"
                                             highlight-current default-expand-all style="min-height: 400px"></el-tree>
                                </el-col>
                            </el-row>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script data-name="this.js">
    require('$');
    var id = 1000;
    module.exports = {
        template: require('!this.htm'),
        loaded: function () {
            $$.m = {
                activeIndex2: '2',
                data: [
                    {
                        "id": 2,
                        "pid": 1,
                        "title": "布局",
                        "description": "",
                        "sort": 0,
                        "uri": "/sys/home/index",
                        "child": [
                            {
                                "id": 3,
                                "pid": 2,
                                "title": "表格1",
                                "description": "",
                                "sort": 0,
                                "uri": "layout"
                            },
                            {
                                "id": 4,
                                "pid": 2,
                                "title": "表格2",
                                "description": "",
                                "sort": 0,
                                "uri": "table2"
                            },
                            {
                                "id": 5,
                                "pid": 2,
                                "title": "表格3",
                                "description": "",
                                "sort": 0,
                                "uri": "table3"
                            },
                            {
                                "id": 6,
                                "pid": 2,
                                "title": "表格4",
                                "description": "",
                                "sort": 0,
                                "uri": "table4"
                            }
                        ]
                    },
                    {
                        "id": 11,
                        "pid": 10,
                        "title": "组件",
                        "description": "",
                        "sort": 0,
                        "uri": "",
                        "child": [
                            {
                                "id": 12,
                                "pid": 11,
                                "title": "表单",
                                "description": "",
                                "sort": 0,
                                "uri": "form"
                            },
                            {
                                "id": 14,
                                "pid": 11,
                                "title": "树形",
                                "description": "",
                                "sort": 0,
                                "uri": "tree"
                            },
                            {
                                "id": 15,
                                "pid": 11,
                                "title": "角色管理",
                                "description": "",
                                "sort": 0,
                                "uri": "role"
                            },
                            {
                                "id": 16,
                                "pid": 11,
                                "title": "用户管理",
                                "description": "",
                                "sort": 0,
                                "uri": "user"
                            }
                        ]
                    }
                ],
                currentPage1: 1,
                menu: 14,
                data2: [{
                    id: 1,
                    label: '首页',
                    children: [{
                        id: 4,
                        label: '首页',
                        children: [{
                            id: 9,
                            label: '工作台'
                        }]
                    }]
                }, {
                    id: 2,
                    label: '社区',
                    children: [{
                        id: 5,
                        label: '老人补贴',
                        children: [{
                            id: 100,
                            label: '已审批'
                        }, {
                            id: 101,
                            label: '未审批'
                        }]
                    }, {
                        id: 6,
                        label: '社区业务'
                    }]
                }, {
                    id: 3,
                    label: '系统',
                    children: [{
                        id: 7,
                        label: '管理',
                        children: [{
                            id: 105,
                            label: '菜单管理'
                        }, {
                            id: 106,
                            label: '权限管理'
                        }]
                    }]
                }],
                defaultProps: {
                    children: 'children',
                    label: 'label'
                },
                ruleForm: {
                    name: '首页',
                    uri: '/sys/demo',
                    date1: '',
                    date2: '',
                    delivery: false,
                    type: [],
                    resource: '',
                    desc: '附加信息'
                },
                rules: {
                    name: [
                        {required: true, message: '请输入活动名称', trigger: 'blur'},
                        {min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur'}
                    ],
                    region: [
                        {required: true, message: '请选择活动区域', trigger: 'change'}
                    ],
                    date1: [
                        {type: 'date', required: true, message: '请选择日期', trigger: 'change'}
                    ],
                    date2: [
                        {type: 'date', required: true, message: '请选择时间', trigger: 'change'}
                    ],
                    type: [
                        {type: 'array', required: true, message: '请至少选择一个活动性质', trigger: 'change'}
                    ],
                    resource: [
                        {required: true, message: '请选择活动资源', trigger: 'change'}
                    ],
                    desc: [
                        {required: true, message: '请填写活动形式', trigger: 'blur'}
                    ]
                },
                loading: false
            };
        },
        methods: {
            go: function (val) {
                location.href = '/sys/index/' + val + '.html';
            },
            item: function () {
                console.log('sss')
            },
            handleClick: function (ret) {
                console.log(ret);
            },
            handleSizeChange: function (val) {
                console.log('每页' + val + '');
            },
            handleCurrentChange: function (val) {
                console.log('当前页: ' + val);
            },
            handleIconClick: function (ev) {
                console.log(ev);
            },
            handleNodeClick: function (data) {
                $$.m.loading = !$$.m.loading;
//                console.log(data);
                console.log($$.m.loading);
            },
            submitForm: function (formName) {

            },
            resetForm: function (formName) {
                this.$refs[formName].resetFields();
            }
        },
        mounted: function () {

        }
    };
</script>